# -*- coding: utf-8 -*-
import os
from dotenv import load_dotenv

load_dotenv()

# Telegram Configuration
TELEGRAM_BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
CHANNEL_ID = int(os.getenv('CHANNEL_ID', 0))
ADMIN_IDS = [int(id.strip()) for id in os.getenv('ADMIN_IDS', '').split(',') if id.strip()]

# Stripe Configuration
STRIPE_API_KEY = os.getenv('STRIPE_API_KEY')
STRIPE_WEBHOOK_SECRET = os.getenv('STRIPE_WEBHOOK_SECRET', '')

# Server Configuration
WEBHOOK_URL = os.getenv('WEBHOOK_URL', 'http://localhost:8080/webhook')
PORT = int(os.getenv('PORT', 8080))

# Database Configuration
DATABASE_URL = os.getenv('DATABASE_URL', 'sqlite:///bot_database.db')

# Stripe Price IDs (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∏–∑ API)
STRIPE_PRICES = {
    '1_month': 'price_1SrkkQAQcjmHJH4yZ7ECWxPM',  # 4.99 EUR/–º–µ—Å—è—Ü
    '6_months': 'price_1Srkp1AQcjmHJH4ynlLT5I5v',  # 24.99 EUR/6 –º–µ—Å—è—Ü–µ–≤
    '12_months': 'price_1SrktMAQcjmHJH4y55By2JLp'  # 44.99 EUR/12 –º–µ—Å—è—Ü–µ–≤
}

# –¢–µ–∫—Å—Ç—ã –±–æ—Ç–∞ (—Ä—É—Å—Å–∫–∏–π)
MESSAGES = {
    'welcome': """üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ENGUERRADOS!

–í—ã –≤ –æ–¥–Ω–æ–º —à–∞–≥–µ –æ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –Ω–µ –≤–∏–¥–∏—Ç –∏–ª–∏ –Ω–µ —É–º–µ–µ—Ç –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å.

ENGUERRADOS ‚Äî —ç—Ç–æ –∑–∞–∫—Ä—ã—Ç–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –º–∏—Ä –¥–≤–∏–∂–µ—Ç—Å—è —Å–∏–ª–æ–π, –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏, –∞ –Ω–µ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏.

üöÄ –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–æ–º—É –∏ –≥–µ–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–º—É –∞–Ω–∞–ª–∏–∑—É –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è:
‚Äî –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç—ã
‚Äî –≥–ª—É–±–æ–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
‚Äî —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, —Ä—ã–Ω–∫–æ–≤ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∞–ª—å—è–Ω—Å–æ–≤

–ó–¥–µ—Å—å –Ω–µ –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç —à—É–º.
–ó–¥–µ—Å—å –ø—Ä–µ–¥–≤–∏–¥—è—Ç —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —Ä–µ—à–µ–Ω–∏—è —Å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º.""",

    'choose_plan': """–ü–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–∞—à–µ —á–ª–µ–Ω—Å—Ç–≤–æ –∏ –¥–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç–æ–º—É —Å–æ–æ–±—â–µ—Å—Ç–≤—É, –≥–¥–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ.

–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –ø–æ–¥–ø–∏—Å–∫–∏:""",

    'payment_success': """‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!

–í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –Ω–∏–∂–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–∫—Ä—ã—Ç–æ–º—É –∫–∞–Ω–∞–ª—É:

{invite_link}

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ENGUERRADOS!""",


    'subscription_expired': """‚ö†Ô∏è –í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞.

–ß—Ç–æ–±—ã –ø—Ä–æ–¥–ª–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–Ω–∞–ª—É, –≤—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω.""",

    'subscription_expiring_soon': """‚ö†Ô∏è –í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç –∑–∞–≤—Ç—Ä–∞!

–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è: {expiry_date}

–ß—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø, –ø—Ä–æ–¥–ª–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É.""",
    
    'main_menu': """üìã –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:""",
    
    'admin_menu': """üë®‚Äçüíº –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"""
}

# Validaci√≥n de configuraci√≥n
def validate_config():
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    errors = []
    
    if not TELEGRAM_BOT_TOKEN:
        errors.append("TELEGRAM_BOT_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    
    if not CHANNEL_ID:
        errors.append("CHANNEL_ID –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    
    if not ADMIN_IDS:
        errors.append("ADMIN_IDS –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã")
    
    if not STRIPE_API_KEY:
        errors.append("STRIPE_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    
    if errors:
        raise ValueError("–û—à–∏–±–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:\n" + "\n".join(f"- {e}" for e in errors))
    
    return True
